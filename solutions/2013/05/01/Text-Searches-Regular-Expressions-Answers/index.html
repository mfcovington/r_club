<!DOCTYPE HTML>

<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Strings and Regular Expressions Answers</title>
    <link rel="stylesheet" type="text/css" href="/r_club/stylesheets/pygment_trac.css">
    <link rel="stylesheet" type="text/css" href="/r_club/stylesheets/styles.css">
    <link rel="shortcut icon" href="/r_club/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/r_club/favicon.ico" type="image/x-icon">
    <script src="/r_club/javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-38722088-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header"><a href="/r_club/">R Club</a></h1>
        <h2 class="header">Strings and Regular Expressions Answers</h2>
      </header>
      <section>
        <div class = "duedate">
  
</div>

<div class = "related">
  
    
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
         related: <a href="/r_club/exercises/2013/04/21/Text-Searches-Regular-Expressions/">Strings and Regular Expressions</a><br>
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
        
        
      
    
  
</div>

<div class = "author">
  
    posted by: Julin Maloof
  
</div>

<div class="content">
  <div id="post">
    <h1>String Searching and Manipulation</h1>

<p>R has extensive tools for searching for text (string) patterns and performing substitutions.  These can be very helpful in manipulation of large data sets.  </p>

<p>These functions can search for exact matches or can make use of an extensive syntax for wildcards, known as <em>regular expressions</em>.  I will first describe the search functions and then explain regular expressions.</p>

<p>In this excercise, type all of the code blocks into your computer to see what happens!  Experiment as you go!</p>

<h2>Search Functions</h2>

<h3><code>grep()</code></h3>

<p>Use <em><code>grep()</code></em> when you want to search for a single pattern in a vector of strings.</p>
<div class="highlight"><pre><code class="r"><span class="c1"># for example: which state names have &#39;i&#39; in them?</span>
data<span class="p">(</span>state<span class="p">)</span>
state.name
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;        &quot;Alaska&quot;         &quot;Arizona&quot;        &quot;Arkansas&quot;      
##  [5] &quot;California&quot;     &quot;Colorado&quot;       &quot;Connecticut&quot;    &quot;Delaware&quot;      
##  [9] &quot;Florida&quot;        &quot;Georgia&quot;        &quot;Hawaii&quot;         &quot;Idaho&quot;         
## [13] &quot;Illinois&quot;       &quot;Indiana&quot;        &quot;Iowa&quot;           &quot;Kansas&quot;        
## [17] &quot;Kentucky&quot;       &quot;Louisiana&quot;      &quot;Maine&quot;          &quot;Maryland&quot;      
## [21] &quot;Massachusetts&quot;  &quot;Michigan&quot;       &quot;Minnesota&quot;      &quot;Mississippi&quot;   
## [25] &quot;Missouri&quot;       &quot;Montana&quot;        &quot;Nebraska&quot;       &quot;Nevada&quot;        
## [29] &quot;New Hampshire&quot;  &quot;New Jersey&quot;     &quot;New Mexico&quot;     &quot;New York&quot;      
## [33] &quot;North Carolina&quot; &quot;North Dakota&quot;   &quot;Ohio&quot;           &quot;Oklahoma&quot;      
## [37] &quot;Oregon&quot;         &quot;Pennsylvania&quot;   &quot;Rhode Island&quot;   &quot;South Carolina&quot;
## [41] &quot;South Dakota&quot;   &quot;Tennessee&quot;      &quot;Texas&quot;          &quot;Utah&quot;          
## [45] &quot;Vermont&quot;        &quot;Virginia&quot;       &quot;Washington&quot;     &quot;West Virginia&quot; 
## [49] &quot;Wisconsin&quot;      &quot;Wyoming&quot;
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># in its basic form, grep returns the position (index) of the items that</span>
<span class="c1"># match the pattern.</span>
grep<span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> x <span class="o">=</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1]  3  5  7  9 10 11 12 13 14 15 18 19 22 23 24 25 29 31 33 35 38 39 40
## [24] 46 47 48 49 50
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># you can also ask grep to return the values that match</span>
grep<span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> x <span class="o">=</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Arizona&quot;        &quot;California&quot;     &quot;Connecticut&quot;    &quot;Florida&quot;       
##  [5] &quot;Georgia&quot;        &quot;Hawaii&quot;         &quot;Idaho&quot;          &quot;Illinois&quot;      
##  [9] &quot;Indiana&quot;        &quot;Iowa&quot;           &quot;Louisiana&quot;      &quot;Maine&quot;         
## [13] &quot;Michigan&quot;       &quot;Minnesota&quot;      &quot;Mississippi&quot;    &quot;Missouri&quot;      
## [17] &quot;New Hampshire&quot;  &quot;New Mexico&quot;     &quot;North Carolina&quot; &quot;Ohio&quot;          
## [21] &quot;Pennsylvania&quot;   &quot;Rhode Island&quot;   &quot;South Carolina&quot; &quot;Virginia&quot;      
## [25] &quot;Washington&quot;     &quot;West Virginia&quot;  &quot;Wisconsin&quot;      &quot;Wyoming&quot;
</code></pre></div>
<p>The variant <em><code>grepl()</code></em> returns a logical vector of TRUE and FALSE indicating whether or not a match occurred.</p>
<div class="highlight"><pre><code class="r">grepl<span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> x <span class="o">=</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE
## [12]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE FALSE  TRUE
## [23]  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE
## [34] FALSE  TRUE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
## [45] FALSE  TRUE  TRUE  TRUE  TRUE  TRUE
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># recalling that TRUE = 1 and FALSE = 0, when can use grepl to quickly</span>
<span class="c1"># determine the number of states that have &#39;i&#39; in them.</span>
sum<span class="p">(</span>grepl<span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> x <span class="o">=</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] 28
</code></pre></div>
<p><strong>Exercise 1:</strong> Can you figure out how to count the number of states that do not have an &quot;i&quot; in their name (without changing the search pattern)?  There are at least two easy ways.</p>
<div class="highlight"><pre><code class="r">sum<span class="p">(</span><span class="o">!</span>grepl<span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> x <span class="o">=</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] 22
</code></pre></div><div class="highlight"><pre><code class="r">length<span class="p">(</span>grep<span class="p">(</span>pattern <span class="o">=</span> <span class="s">&quot;i&quot;</span><span class="p">,</span> x <span class="o">=</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> invert <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] 22
</code></pre></div>
<h3><code>match()</code></h3>

<p>Use <em><code>match()</code></em> when you have two sets of values (lets call them Set A and Set B) and you want to know the (first) positions in Set B that match something that is in Set A.  Match only finds exact matches and can not be used with regular expressions.</p>
<div class="highlight"><pre><code class="r"><span class="c1"># we have a list of favorite fruits and a list of citrus.  Which of the</span>
<span class="c1"># favorites are citrus?</span>
favorites <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;peach&quot;</span><span class="p">,</span> <span class="s">&quot;bannana&quot;</span><span class="p">,</span> <span class="s">&quot;blueberry&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;plum&quot;</span><span class="p">,</span> <span class="s">&quot;strawberry&quot;</span><span class="p">,</span> 
    <span class="s">&quot;mandarin&quot;</span><span class="p">)</span>
citrus <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;kumquat&quot;</span><span class="p">,</span> <span class="s">&quot;grapefruit&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;mandarin&quot;</span><span class="p">,</span> <span class="s">&quot;orange&quot;</span><span class="p">,</span> <span class="s">&quot;tangerine&quot;</span><span class="p">,</span> 
    <span class="s">&quot;tangelo&quot;</span><span class="p">,</span> <span class="s">&quot;lemon&quot;</span><span class="p">,</span> <span class="s">&quot;lime&quot;</span><span class="p">)</span>
match<span class="p">(</span>favorites<span class="p">,</span> citrus<span class="p">)</span>  <span class="c1">#what do the numbers returned refer to?</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] NA NA NA  3 NA NA  4
</code></pre></div>
<p>Match has an alternative form which I find more convenient: <strong><code>%in%</code></strong>.  This form returns Trues or Falses indicating whether or not Set A is in Set B.</p>
<div class="highlight"><pre><code class="r">favorites <span class="o">%in%</span> citrus
</code></pre></div><div class="highlight"><pre><code class="text">## [1] FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># most useful is to use this in combination with square brackets to</span>
<span class="c1"># extract</span>
favorites<span class="p">[</span>favorites <span class="o">%in%</span> citrus<span class="p">]</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;orange&quot;   &quot;mandarin&quot;
</code></pre></div>
<h3><code>sub()</code></h3>

<p><strong><code>sub()</code></strong> performs text substitutions.  Think of it as find and replace.</p>
<div class="highlight"><pre><code class="r"><span class="c1"># lets say that we wanted to replace &#39;W&#39; with the phrase &#39;_DoubleU_&#39;</span>
sub<span class="p">(</span><span class="s">&quot;w&quot;</span><span class="p">,</span> <span class="s">&quot;_DoubleU_&quot;</span><span class="p">,</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;               &quot;Alaska&quot;               
##  [3] &quot;Arizona&quot;               &quot;Arkansas&quot;             
##  [5] &quot;California&quot;            &quot;Colorado&quot;             
##  [7] &quot;Connecticut&quot;           &quot;Dela_DoubleU_are&quot;     
##  [9] &quot;Florida&quot;               &quot;Georgia&quot;              
## [11] &quot;Ha_DoubleU_aii&quot;        &quot;Idaho&quot;                
## [13] &quot;Illinois&quot;              &quot;Indiana&quot;              
## [15] &quot;Io_DoubleU_a&quot;          &quot;Kansas&quot;               
## [17] &quot;Kentucky&quot;              &quot;Louisiana&quot;            
## [19] &quot;Maine&quot;                 &quot;Maryland&quot;             
## [21] &quot;Massachusetts&quot;         &quot;Michigan&quot;             
## [23] &quot;Minnesota&quot;             &quot;Mississippi&quot;          
## [25] &quot;Missouri&quot;              &quot;Montana&quot;              
## [27] &quot;Nebraska&quot;              &quot;Nevada&quot;               
## [29] &quot;Ne_DoubleU_ Hampshire&quot; &quot;Ne_DoubleU_ Jersey&quot;   
## [31] &quot;Ne_DoubleU_ Mexico&quot;    &quot;Ne_DoubleU_ York&quot;     
## [33] &quot;North Carolina&quot;        &quot;North Dakota&quot;         
## [35] &quot;Ohio&quot;                  &quot;Oklahoma&quot;             
## [37] &quot;Oregon&quot;                &quot;Pennsylvania&quot;         
## [39] &quot;Rhode Island&quot;          &quot;South Carolina&quot;       
## [41] &quot;South Dakota&quot;          &quot;Tennessee&quot;            
## [43] &quot;Texas&quot;                 &quot;Utah&quot;                 
## [45] &quot;Vermont&quot;               &quot;Virginia&quot;             
## [47] &quot;_DoubleU_ashington&quot;    &quot;_DoubleU_est Virginia&quot;
## [49] &quot;_DoubleU_isconsin&quot;     &quot;_DoubleU_yoming&quot;
</code></pre></div>
<p><strong>Excerise 2:</strong> Try replacing all of the &quot;i&quot;s with &quot;y&quot;s.  Are results what you expected? Why or why not?</p>
<div class="highlight"><pre><code class="r">sub<span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="p">,</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;        &quot;Alaska&quot;         &quot;Aryzona&quot;        &quot;Arkansas&quot;      
##  [5] &quot;Calyfornia&quot;     &quot;Colorado&quot;       &quot;Connectycut&quot;    &quot;Delaware&quot;      
##  [9] &quot;Floryda&quot;        &quot;Georgya&quot;        &quot;Hawayi&quot;         &quot;ydaho&quot;         
## [13] &quot;yllinois&quot;       &quot;yndiana&quot;        &quot;yowa&quot;           &quot;Kansas&quot;        
## [17] &quot;Kentucky&quot;       &quot;Louysiana&quot;      &quot;Mayne&quot;          &quot;Maryland&quot;      
## [21] &quot;Massachusetts&quot;  &quot;Mychigan&quot;       &quot;Mynnesota&quot;      &quot;Myssissippi&quot;   
## [25] &quot;Myssouri&quot;       &quot;Montana&quot;        &quot;Nebraska&quot;       &quot;Nevada&quot;        
## [29] &quot;New Hampshyre&quot;  &quot;New Jersey&quot;     &quot;New Mexyco&quot;     &quot;New York&quot;      
## [33] &quot;North Carolyna&quot; &quot;North Dakota&quot;   &quot;Ohyo&quot;           &quot;Oklahoma&quot;      
## [37] &quot;Oregon&quot;         &quot;Pennsylvanya&quot;   &quot;Rhode ysland&quot;   &quot;South Carolyna&quot;
## [41] &quot;South Dakota&quot;   &quot;Tennessee&quot;      &quot;Texas&quot;          &quot;Utah&quot;          
## [45] &quot;Vermont&quot;        &quot;Vyrginia&quot;       &quot;Washyngton&quot;     &quot;West Vyrginia&quot; 
## [49] &quot;Wysconsin&quot;      &quot;Wyomyng&quot;
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># Only the first &#39;i&#39; in each word is replaced</span>
</code></pre></div>
<h3><code>gsub()</code></h3>

<p><code>sub()</code> only replaces the first occurrence of <em>pattern</em>.  <strong><code>gsub()</code></strong> will replace all occurrences.</p>
<div class="highlight"><pre><code class="r">gsub<span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="p">,</span> state.name<span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;        &quot;Alaska&quot;         &quot;Aryzona&quot;        &quot;Arkansas&quot;      
##  [5] &quot;Calyfornya&quot;     &quot;Colorado&quot;       &quot;Connectycut&quot;    &quot;Delaware&quot;      
##  [9] &quot;Floryda&quot;        &quot;Georgya&quot;        &quot;Hawayy&quot;         &quot;ydaho&quot;         
## [13] &quot;yllynoys&quot;       &quot;yndyana&quot;        &quot;yowa&quot;           &quot;Kansas&quot;        
## [17] &quot;Kentucky&quot;       &quot;Louysyana&quot;      &quot;Mayne&quot;          &quot;Maryland&quot;      
## [21] &quot;Massachusetts&quot;  &quot;Mychygan&quot;       &quot;Mynnesota&quot;      &quot;Myssyssyppy&quot;   
## [25] &quot;Myssoury&quot;       &quot;Montana&quot;        &quot;Nebraska&quot;       &quot;Nevada&quot;        
## [29] &quot;New Hampshyre&quot;  &quot;New Jersey&quot;     &quot;New Mexyco&quot;     &quot;New York&quot;      
## [33] &quot;North Carolyna&quot; &quot;North Dakota&quot;   &quot;Ohyo&quot;           &quot;Oklahoma&quot;      
## [37] &quot;Oregon&quot;         &quot;Pennsylvanya&quot;   &quot;Rhode ysland&quot;   &quot;South Carolyna&quot;
## [41] &quot;South Dakota&quot;   &quot;Tennessee&quot;      &quot;Texas&quot;          &quot;Utah&quot;          
## [45] &quot;Vermont&quot;        &quot;Vyrgynya&quot;       &quot;Washyngton&quot;     &quot;West Vyrgynya&quot; 
## [49] &quot;Wysconsyn&quot;      &quot;Wyomyng&quot;
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># compare to just using sub()</span>
</code></pre></div>
<h2>Regular Expressions</h2>

<p>Regular expressions (regexp) are a way of specifying wild cards in the search operations described above. The same syntax (with some modifications) is used in many computer languages including Unix/Linux command line tools, Perl, python, and very helpfully SublimeText2.</p>

<h3>Character classes I</h3>

<p>Regexp have codes to match certain <em>classes</em> of characters.</p>

<ul>
<li>.  Matches any single character</li>
<li>\w Matches any character that would be found in a &quot;word&quot; including digits (excludes punctuation and white space)</li>
<li>\W Is the opposite of \w and matches any non-word character</li>
<li>\d Matches any digit character</li>
<li>\D Matches any non-digit character</li>
<li>\s Matches any white space character</li>
<li>\S Matches any non space character</li>
</ul>

<p>The following match specific characters or locations but are worth mentioning here:
* ^  Matches the beginning of a line
* $  Matches the end of a line
* \t tab character
* \n return character</p>

<p>Unless you use additional modifications described below, these match a single character.</p>

<p>How would we find state names that have two &quot;a&quot;s separated by a single additional character?</p>
<div class="highlight"><pre><code class="r">data<span class="p">(</span>state<span class="p">)</span>
grep<span class="p">(</span><span class="s">&quot;a.a&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Alabama&quot;   &quot;Alaska&quot;    &quot;Delaware&quot;  &quot;Hawaii&quot;    &quot;Indiana&quot;   &quot;Louisiana&quot;
## [7] &quot;Montana&quot;   &quot;Nevada&quot;
</code></pre></div>
<p><strong>Exercise 3:</strong> Find state names that have a space in their names.</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;New Hampshire&quot;  &quot;New Jersey&quot;     &quot;New Mexico&quot;     &quot;New York&quot;      
##  [5] &quot;North Carolina&quot; &quot;North Dakota&quot;   &quot;Rhode Island&quot;   &quot;South Carolina&quot;
##  [9] &quot;South Dakota&quot;   &quot;West Virginia&quot;
</code></pre></div><div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;\\s&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;New Hampshire&quot;  &quot;New Jersey&quot;     &quot;New Mexico&quot;     &quot;New York&quot;      
##  [5] &quot;North Carolina&quot; &quot;North Dakota&quot;   &quot;Rhode Island&quot;   &quot;South Carolina&quot;
##  [9] &quot;South Dakota&quot;   &quot;West Virginia&quot;
</code></pre></div>
<p><strong>Exercise 4:</strong> Find state names that begin with &quot;M&quot;</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;^M&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Maine&quot;         &quot;Maryland&quot;      &quot;Massachusetts&quot; &quot;Michigan&quot;     
## [5] &quot;Minnesota&quot;     &quot;Mississippi&quot;   &quot;Missouri&quot;      &quot;Montana&quot;
</code></pre></div>
<h3>Character classes II</h3>

<p>An alternative way of specifying character classes is to enclose them in square brackets.</p>

<p>For example, to find all of the state names that end with a vowel:</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;[aeiou]$&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;        &quot;Alaska&quot;         &quot;Arizona&quot;        &quot;California&quot;    
##  [5] &quot;Colorado&quot;       &quot;Delaware&quot;       &quot;Florida&quot;        &quot;Georgia&quot;       
##  [9] &quot;Hawaii&quot;         &quot;Idaho&quot;          &quot;Indiana&quot;        &quot;Iowa&quot;          
## [13] &quot;Louisiana&quot;      &quot;Maine&quot;          &quot;Minnesota&quot;      &quot;Mississippi&quot;   
## [17] &quot;Missouri&quot;       &quot;Montana&quot;        &quot;Nebraska&quot;       &quot;Nevada&quot;        
## [21] &quot;New Hampshire&quot;  &quot;New Mexico&quot;     &quot;North Carolina&quot; &quot;North Dakota&quot;  
## [25] &quot;Ohio&quot;           &quot;Oklahoma&quot;       &quot;Pennsylvania&quot;   &quot;South Carolina&quot;
## [29] &quot;South Dakota&quot;   &quot;Tennessee&quot;      &quot;Virginia&quot;       &quot;West Virginia&quot;
</code></pre></div>
<p>The ^ sign inside of square brackets inverts the search.</p>

<p><strong>Exercise 5:</strong> Find state names that begin with non-vowels.</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;^[^aeiou]&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;California&quot;     &quot;Colorado&quot;       &quot;Connecticut&quot;    &quot;Delaware&quot;      
##  [5] &quot;Florida&quot;        &quot;Georgia&quot;        &quot;Hawaii&quot;         &quot;Kansas&quot;        
##  [9] &quot;Kentucky&quot;       &quot;Louisiana&quot;      &quot;Maine&quot;          &quot;Maryland&quot;      
## [13] &quot;Massachusetts&quot;  &quot;Michigan&quot;       &quot;Minnesota&quot;      &quot;Mississippi&quot;   
## [17] &quot;Missouri&quot;       &quot;Montana&quot;        &quot;Nebraska&quot;       &quot;Nevada&quot;        
## [21] &quot;New Hampshire&quot;  &quot;New Jersey&quot;     &quot;New Mexico&quot;     &quot;New York&quot;      
## [25] &quot;North Carolina&quot; &quot;North Dakota&quot;   &quot;Pennsylvania&quot;   &quot;Rhode Island&quot;  
## [29] &quot;South Carolina&quot; &quot;South Dakota&quot;   &quot;Tennessee&quot;      &quot;Texas&quot;         
## [33] &quot;Vermont&quot;        &quot;Virginia&quot;       &quot;Washington&quot;     &quot;West Virginia&quot; 
## [37] &quot;Wisconsin&quot;      &quot;Wyoming&quot;
</code></pre></div>
<p>You can specify ranges of characters inside square brackets:</p>

<ul>
<li>[0-9] : all digits</li>
<li>[a-j] : the first 10 (lowercase) letters of the alphabet</li>
</ul>

<p>There are also a number of predefined character classes.  For example:</p>

<p>[:punct:]
Punctuation characters:
! &quot; # $ % &amp; &#39; ( ) * + , - . / : ; &lt; = &gt; ? @ [ \ ] ^ _ ` { | } ~.</p>

<p>See <code>?regex</code> for additional classes.</p>

<p>Perhaps confusingly these classes must themselves be placed within square brackets</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;[[:space:]]&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;New Hampshire&quot;  &quot;New Jersey&quot;     &quot;New Mexico&quot;     &quot;New York&quot;      
##  [5] &quot;North Carolina&quot; &quot;North Dakota&quot;   &quot;Rhode Island&quot;   &quot;South Carolina&quot;
##  [9] &quot;South Dakota&quot;   &quot;West Virginia&quot;
</code></pre></div>
<h3>Specifying repeats</h3>

<p>You can specify the number of times that a character or character class is repeated.</p>

<ul>
<li>?     The preceding item is optional and will be matched at most once.</li>
<li>*     The preceding item will be matched zero or more times.</li>
<li>+     The preceding item will be matched one or more times.</li>
<li>{n}   The preceding item is matched exactly n times.</li>
<li>{n,}  The preceding item is matched n or more times.</li>
<li>{n,m} The preceding item is matched at least n times, but not more than m times.</li>
</ul>

<p><strong>Exercise 6:</strong> Find the state names that have two consecutive vowels in them.</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;[aeiou]{2}&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;California&quot;     &quot;Georgia&quot;        &quot;Hawaii&quot;         &quot;Illinois&quot;      
##  [5] &quot;Indiana&quot;        &quot;Louisiana&quot;      &quot;Maine&quot;          &quot;Missouri&quot;      
##  [9] &quot;Ohio&quot;           &quot;Pennsylvania&quot;   &quot;South Carolina&quot; &quot;South Dakota&quot;  
## [13] &quot;Tennessee&quot;      &quot;Virginia&quot;       &quot;West Virginia&quot;
</code></pre></div>
<p><strong>Exercise 7:</strong> Using last weeks data set, count the number of babys with the name Stacey or Stacy.  Bonus 1: count Stacey, Stacy, or Staci.  Bonus 2: list the unique set of names that start with &quot;Stac&quot;.  The data set can be <a href="http://plyr.had.co.nz/09-user/plyr-tutorial.zip">downloaded here</a></p>
<div class="highlight"><pre><code class="r">bnames <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;~/Documents/Teaching/RClub/plyr-tutorial/examples/bnames.csv&quot;</span><span class="p">,</span> 
    as.is <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
<span class="c1"># check it first:</span>
unique<span class="p">(</span>grep<span class="p">(</span><span class="s">&quot;Stace?y&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Stacy&quot;  &quot;Stacey&quot;
</code></pre></div><div class="highlight"><pre><code class="r">sum<span class="p">(</span>grepl<span class="p">(</span><span class="s">&quot;Stace?y&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] 228
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># Bonus1:</span>
unique<span class="p">(</span>grep<span class="p">(</span><span class="s">&quot;Stace?[iy]$&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Stacy&quot;  &quot;Stacey&quot; &quot;Staci&quot;
</code></pre></div><div class="highlight"><pre><code class="r">sum<span class="p">(</span>grepl<span class="p">(</span><span class="s">&quot;Stace?[iy]$&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] 262
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># Bonus2:</span>
unique<span class="p">(</span>grep<span class="p">(</span><span class="s">&quot;Stac&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Stacy&quot;  &quot;Stacey&quot; &quot;Stacia&quot; &quot;Stacie&quot; &quot;Staci&quot;
</code></pre></div>
<h3>Alternates</h3>

<p>The &quot;|&quot; character can be read as &quot;or&quot; and can be used to specify alternates.</p>
<div class="highlight"><pre><code class="r"><span class="c1"># Example: change the path below to point to &#39;bnames.csv&#39; on your computer</span>
bnames <span class="o">&lt;-</span> read.csv<span class="p">(</span><span class="s">&quot;~/Documents/Teaching/RClub/plyr-tutorial/examples/bnames.csv&quot;</span><span class="p">,</span> 
    as.is <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
bnames<span class="p">[</span>grep<span class="p">(</span><span class="s">&quot;Stac(y|i)&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">),</span> <span class="p">]</span>
</code></pre></div><div class="highlight"><pre><code class="text">##        year   name  percent  sex
## 897    1880  Stacy 0.000051  boy
## 5925   1885  Stacy 0.000052  boy
## 11834  1891  Stacy 0.000064  boy
## 12856  1892  Stacy 0.000061  boy
## 13896  1893  Stacy 0.000058  boy
## 14847  1894  Stacy 0.000064  boy
## 18796  1898  Stacy 0.000068  boy
## 23839  1903  Stacy 0.000070  boy
## 27928  1907  Stacy 0.000063  boy
## 28610  1908  Stacy 0.000114  boy
## 31921  1911  Stacy 0.000058  boy
## 39985  1919  Stacy 0.000047  boy
## 40842  1920  Stacy 0.000059  boy
## 55957  1935  Stacy 0.000042  boy
## 56923  1936  Stacy 0.000042  boy
## 59972  1939  Stacy 0.000038  boy
## 60925  1940  Stacy 0.000040  boy
## 61883  1941  Stacy 0.000041  boy
## 63950  1943  Stacy 0.000034  boy
## 64858  1944  Stacy 0.000040  boy
## 65808  1945  Stacy 0.000044  boy
## 66934  1946  Stacy 0.000032  boy
## 67867  1947  Stacy 0.000035  boy
## 68833  1948  Stacy 0.000038  boy
## 69689  1949  Stacy 0.000055  boy
## 70677  1950  Stacy 0.000058  boy
## 71656  1951  Stacy 0.000060  boy
## 72678  1952  Stacy 0.000054  boy
## 73675  1953  Stacy 0.000056  boy
## 74638  1954  Stacy 0.000064  boy
## 75640  1955  Stacy 0.000065  boy
## 76595  1956  Stacy 0.000076  boy
## 77551  1957  Stacy 0.000089  boy
## 78502  1958  Stacy 0.000111  boy
## 79469  1959  Stacy 0.000134  boy
## 80464  1960  Stacy 0.000136  boy
## 81450  1961  Stacy 0.000150  boy
## 82398  1962  Stacy 0.000198  boy
## 83361  1963  Stacy 0.000228  boy
## 84340  1964  Stacy 0.000263  boy
## 85307  1965  Stacy 0.000319  boy
## 86284  1966  Stacy 0.000373  boy
## 87162  1967  Stacy 0.000932  boy
## 88157  1968  Stacy 0.000977  boy
## 89186  1969  Stacy 0.000816  boy
## 90211  1970  Stacy 0.000620  boy
## 91231  1971  Stacy 0.000565  boy
## 92234  1972  Stacy 0.000546  boy
## 93230  1973  Stacy 0.000567  boy
## 94241  1974  Stacy 0.000509  boy
## 95255  1975  Stacy 0.000484  boy
## 96306  1976  Stacy 0.000351  boy
## 97376  1977  Stacy 0.000254  boy
## 98428  1978  Stacy 0.000201  boy
## 99526  1979  Stacy 0.000145  boy
## 100564 1980  Stacy 0.000126  boy
## 101668 1981  Stacy 0.000090  boy
## 102753 1982  Stacy 0.000073  boy
## 103774 1983  Stacy 0.000068  boy
## 104714 1984  Stacy 0.000080  boy
## 105759 1985  Stacy 0.000071  boy
## 106767 1986  Stacy 0.000073  boy
## 107764 1987  Stacy 0.000074  boy
## 108808 1988  Stacy 0.000069  boy
## 109802 1989  Stacy 0.000074  boy
## 110818 1990  Stacy 0.000073  boy
## 111849 1991  Stacy 0.000071  boy
## 112871 1992  Stacy 0.000070  boy
## 113955 1993  Stacy 0.000062  boy
## 162922 1913 Stacia 0.000052 girl
## 165901 1916 Stacia 0.000053 girl
## 166916 1917 Stacia 0.000052 girl
## 167813 1918 Stacia 0.000065 girl
## 168953 1919 Stacia 0.000048 girl
## 198981 1949  Stacy 0.000048 girl
## 200866 1951  Stacy 0.000059 girl
## 201798 1952  Stacy 0.000068 girl
## 202665 1953  Stacy 0.000095 girl
## 203535 1954  Stacy 0.000139 girl
## 204528 1955  Stacy 0.000151 girl
## 205426 1956  Stacy 0.000223 girl
## 205975 1956 Stacie 0.000052 girl
## 206348 1957  Stacy 0.000323 girl
## 206760 1957 Stacie 0.000082 girl
## 207256 1958  Stacy 0.000558 girl
## 207710 1958 Stacie 0.000094 girl
## 208217 1959  Stacy 0.000713 girl
## 208624 1959 Stacie 0.000123 girl
## 209222 1960  Stacy 0.000699 girl
## 209556 1960 Stacie 0.000149 girl
## 210206 1961  Stacy 0.000809 girl
## 210512 1961 Stacie 0.000176 girl
## 211176 1962  Stacy 0.001098 girl
## 211471 1962 Stacie 0.000207 girl
## 211751 1962  Staci 0.000094 girl
## 212129 1963  Stacy 0.001641 girl
## 212389 1963 Stacie 0.000307 girl
## 212580 1963  Staci 0.000145 girl
## 213123 1964  Stacy 0.001768 girl
## 213404 1964 Stacie 0.000299 girl
## 213459 1964  Staci 0.000230 girl
## 213961 1964 Stacia 0.000062 girl
## 214119 1965  Stacy 0.001754 girl
## 214364 1965 Stacie 0.000340 girl
## 214410 1965  Staci 0.000282 girl
## 214851 1965 Stacia 0.000076 girl
## 215091 1966  Stacy 0.002149 girl
## 215359 1966 Stacie 0.000366 girl
## 215380 1966  Staci 0.000331 girl
## 215839 1966 Stacia 0.000081 girl
## 216074 1967  Stacy 0.002678 girl
## 216301 1967 Stacie 0.000486 girl
## 216316 1967  Staci 0.000437 girl
## 216822 1967 Stacia 0.000086 girl
## 217064 1968  Stacy 0.003152 girl
## 217252 1968 Stacie 0.000631 girl
## 217277 1968  Staci 0.000571 girl
## 217737 1968 Stacia 0.000105 girl
## 218053 1969  Stacy 0.003681 girl
## 218209 1969 Stacie 0.000853 girl
## 218264 1969  Staci 0.000624 girl
## 218668 1969 Stacia 0.000125 girl
## 219042 1970  Stacy 0.004245 girl
## 219165 1970 Stacie 0.001105 girl
## 219268 1970  Staci 0.000626 girl
## 219581 1970 Stacia 0.000167 girl
## 220032 1971  Stacy 0.005201 girl
## 220131 1971 Stacie 0.001457 girl
## 220250 1971  Staci 0.000673 girl
## 220577 1971 Stacia 0.000174 girl
## 221033 1972  Stacy 0.004717 girl
## 221159 1972 Stacie 0.001130 girl
## 221253 1972  Staci 0.000659 girl
## 221653 1972 Stacia 0.000145 girl
## 222032 1973  Stacy 0.004723 girl
## 222150 1973 Stacie 0.001182 girl
## 222224 1973  Staci 0.000723 girl
## 222650 1973 Stacia 0.000149 girl
## 223038 1974  Stacy 0.004304 girl
## 223156 1974 Stacie 0.001122 girl
## 223271 1974  Staci 0.000601 girl
## 223646 1974 Stacia 0.000151 girl
## 224034 1975  Stacy 0.004596 girl
## 224146 1975 Stacie 0.001178 girl
## 224253 1975  Staci 0.000621 girl
## 224684 1975 Stacia 0.000141 girl
## 225038 1976  Stacy 0.004152 girl
## 225151 1976 Stacie 0.001098 girl
## 225269 1976  Staci 0.000553 girl
## 225703 1976 Stacia 0.000134 girl
## 226042 1977  Stacy 0.003743 girl
## 226185 1977 Stacie 0.000904 girl
## 226288 1977  Staci 0.000511 girl
## 226633 1977 Stacia 0.000161 girl
## 227044 1978  Stacy 0.003515 girl
## 227177 1978 Stacie 0.000892 girl
## 227304 1978  Staci 0.000464 girl
## 227756 1978 Stacia 0.000124 girl
## 228043 1979  Stacy 0.003316 girl
## 228201 1979 Stacie 0.000769 girl
## 228299 1979  Staci 0.000462 girl
## 228793 1979 Stacia 0.000116 girl
## 229053 1980  Stacy 0.002843 girl
## 229222 1980 Stacie 0.000649 girl
## 229310 1980  Staci 0.000438 girl
## 229833 1980 Stacia 0.000106 girl
## 230065 1981  Stacy 0.002504 girl
## 230235 1981 Stacie 0.000594 girl
## 230363 1981  Staci 0.000362 girl
## 230887 1981 Stacia 0.000096 girl
## 231072 1982  Stacy 0.002261 girl
## 231280 1982 Stacie 0.000479 girl
## 231354 1982  Staci 0.000365 girl
## 231891 1982 Stacia 0.000095 girl
## 232061 1983  Stacy 0.002615 girl
## 232261 1983 Stacie 0.000511 girl
## 232326 1983  Staci 0.000398 girl
## 232836 1983 Stacia 0.000103 girl
## 233067 1984  Stacy 0.002466 girl
## 233253 1984 Stacie 0.000547 girl
## 233327 1984  Staci 0.000399 girl
## 233905 1984 Stacia 0.000092 girl
## 234067 1985  Stacy 0.002228 girl
## 234282 1985 Stacie 0.000479 girl
## 234323 1985  Staci 0.000399 girl
## 234852 1985 Stacia 0.000103 girl
## 235087 1986  Stacy 0.001747 girl
## 235301 1986 Stacie 0.000440 girl
## 235369 1986  Staci 0.000346 girl
## 235835 1986 Stacia 0.000108 girl
## 236101 1987  Stacy 0.001466 girl
## 236330 1987 Stacie 0.000396 girl
## 236338 1987  Staci 0.000388 girl
## 237126 1988  Stacy 0.001180 girl
## 237323 1988  Staci 0.000401 girl
## 237340 1988 Stacie 0.000374 girl
## 237977 1988 Stacia 0.000089 girl
## 238152 1989  Stacy 0.000947 girl
## 238382 1989  Staci 0.000332 girl
## 238399 1989 Stacie 0.000311 girl
## 239173 1990  Stacy 0.000814 girl
## 239420 1990 Stacie 0.000294 girl
## 239439 1990  Staci 0.000278 girl
## 240212 1991  Stacy 0.000693 girl
## 240479 1991  Staci 0.000250 girl
## 240536 1991 Stacie 0.000215 girl
## 241232 1992  Stacy 0.000593 girl
## 241526 1992 Stacie 0.000225 girl
## 241537 1992  Staci 0.000219 girl
## 242288 1993  Stacy 0.000485 girl
## 242577 1993 Stacie 0.000208 girl
## 242636 1993  Staci 0.000179 girl
## 243319 1994  Stacy 0.000436 girl
## 243672 1994 Stacie 0.000163 girl
## 243799 1994  Staci 0.000130 girl
## 244389 1995  Stacy 0.000355 girl
## 244805 1995 Stacie 0.000129 girl
## 244959 1995  Staci 0.000103 girl
## 245420 1996  Stacy 0.000316 girl
## 245882 1996 Stacie 0.000117 girl
## 246471 1997  Stacy 0.000279 girl
## 247517 1998  Stacy 0.000253 girl
## 248554 1999  Stacy 0.000234 girl
## 249597 2000  Stacy 0.000212 girl
## 250603 2001  Stacy 0.000211 girl
## 251660 2002  Stacy 0.000195 girl
## 252663 2003  Stacy 0.000199 girl
## 253632 2004  Stacy 0.000214 girl
## 254650 2005  Stacy 0.000211 girl
## 255674 2006  Stacy 0.000202 girl
## 256691 2007  Stacy 0.000199 girl
## 257725 2008  Stacy 0.000198 girl
</code></pre></div>
<p><strong>Exercise 8:</strong> Pull out the names &quot;Jonathan&quot; &quot;Jonnie&quot; and &quot;Johnathon&quot; but not other Jon names.  Bonus: Only have Jon listed once in your search string.</p>
<div class="highlight"><pre><code class="r">unique<span class="p">(</span>grep<span class="p">(</span><span class="s">&quot;^(Johnathon)|(Jon(nie)|(athon))&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Jonnie&quot;    &quot;Jonathon&quot;  &quot;Johnathon&quot;
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1">## note that this was harder than intended.  I meant to ask for &#39;Jonathan&#39;</span>
<span class="c1">## &#39;Jonnie&#39; and &#39;Jonathon&#39;</span>
unique<span class="p">(</span>grep<span class="p">(</span><span class="s">&quot;^Jon((nie)|(ath[ao]n))&quot;</span><span class="p">,</span> bnames<span class="o">$</span>name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">))</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Jonathan&quot; &quot;Jonnie&quot;   &quot;Jonathon&quot;
</code></pre></div>
<h3>Escapes</h3>

<p>What if you want to match a &quot;.&quot; or other special character?  The following characters have special meaning in regular expressions: &quot;. \ | ( ) [ { ^ $ * + ?&quot; and if you want to search for them you have to do something special.</p>
<div class="highlight"><pre><code class="r"><span class="c1"># say you want all Chrom one ILs</span>
ILs <span class="o">&lt;-</span> c<span class="p">(</span><span class="s">&quot;IL.1.1&quot;</span><span class="p">,</span> <span class="s">&quot;IL.2.2&quot;</span><span class="p">,</span> <span class="s">&quot;IL.1.3&quot;</span><span class="p">,</span> <span class="s">&quot;IL.2.1&quot;</span><span class="p">,</span> <span class="s">&quot;IL.11.1&quot;</span><span class="p">,</span> <span class="s">&quot;IL.11.3&quot;</span><span class="p">,</span> <span class="s">&quot;IL.12.1&quot;</span><span class="p">,</span> 
    <span class="s">&quot;IL.12.2&quot;</span><span class="p">)</span>
<span class="c1"># the following seems logical at first:</span>
grep<span class="p">(</span><span class="s">&quot;IL.1.&quot;</span><span class="p">,</span> ILs<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;IL.1.1&quot;  &quot;IL.1.3&quot;  &quot;IL.11.1&quot; &quot;IL.11.3&quot; &quot;IL.12.1&quot; &quot;IL.12.2&quot;
</code></pre></div>
<p>What happened?  Remember that &quot;.&quot; matches any character.  We need to tell grep that the &quot;.&quot; is just a regular character, not a wildcard. To do this we &quot;escape&quot; it by preceding it with a &quot;\&quot;.  However, since &quot;\&quot; itself is a special character it must also be escaped. So we use two backslashes. </p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;IL\\.1\\.&quot;</span><span class="p">,</span> ILs<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;IL.1.1&quot; &quot;IL.1.3&quot;
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># an alternative, if you don&#39;t need any regex functionality is to use the</span>
<span class="c1"># argument &#39;fixed=T&#39;</span>
grep<span class="p">(</span><span class="s">&quot;IL.1.&quot;</span><span class="p">,</span> ILs<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> fixed <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;IL.1.1&quot; &quot;IL.1.3&quot;
</code></pre></div>
<h3>Back references</h3>

<p>One of the powerful tools in regexps is the ability to refer back to a previous match.  The item that you want to refer back to is enclosed in parentheses.  You backreference with a backslash and a digit.  A &quot;1&quot; would indicate the first group enclosed in a parentheses, a &quot;2&quot; would refer to the second group, etc.</p>

<p>Suppose we want to find all state names that have letters repeated twice in a row.</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;(.)\\1&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Connecticut&quot;   &quot;Hawaii&quot;        &quot;Illinois&quot;      &quot;Massachusetts&quot;
## [5] &quot;Minnesota&quot;     &quot;Mississippi&quot;   &quot;Missouri&quot;      &quot;Pennsylvania&quot; 
## [9] &quot;Tennessee&quot;
</code></pre></div><div class="highlight"><pre><code class="r"><span class="c1"># the &#39;.&#39; matches any character.  Enclosing that in parentheses designates</span>
<span class="c1"># it as an item that we want to refer back to.  The \\1 refers back to</span>
<span class="c1"># it.</span>
</code></pre></div>
<p><strong>Exercise 9:</strong> Find all state names that have two vowels repeated.</p>
<div class="highlight"><pre><code class="r">grep<span class="p">(</span><span class="s">&quot;([aeiou])\\1&quot;</span><span class="p">,</span> state.name<span class="p">,</span> value <span class="o">=</span> <span class="k-Variable">T</span><span class="p">,</span> ignore.case <span class="o">=</span> <span class="k-Variable">T</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">## [1] &quot;Hawaii&quot;    &quot;Tennessee&quot;
</code></pre></div>
<p>I find back references particularly helpful in combination with sub(), because you can use them in your replacement string.</p>

<p><strong>Exercise 10:</strong> For all two-worded state names reverse the order of the two words and add a comma between the words.  (&quot;North Carolina&quot; should become &quot;Carolina, North&quot;)</p>
<div class="highlight"><pre><code class="r">sub<span class="p">(</span><span class="s">&quot;([[:alpha:]]+) ([[:alpha:]]+)&quot;</span><span class="p">,</span> <span class="s">&quot;\\2, \\1&quot;</span><span class="p">,</span> state.name<span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;         &quot;Alaska&quot;          &quot;Arizona&quot;        
##  [4] &quot;Arkansas&quot;        &quot;California&quot;      &quot;Colorado&quot;       
##  [7] &quot;Connecticut&quot;     &quot;Delaware&quot;        &quot;Florida&quot;        
## [10] &quot;Georgia&quot;         &quot;Hawaii&quot;          &quot;Idaho&quot;          
## [13] &quot;Illinois&quot;        &quot;Indiana&quot;         &quot;Iowa&quot;           
## [16] &quot;Kansas&quot;          &quot;Kentucky&quot;        &quot;Louisiana&quot;      
## [19] &quot;Maine&quot;           &quot;Maryland&quot;        &quot;Massachusetts&quot;  
## [22] &quot;Michigan&quot;        &quot;Minnesota&quot;       &quot;Mississippi&quot;    
## [25] &quot;Missouri&quot;        &quot;Montana&quot;         &quot;Nebraska&quot;       
## [28] &quot;Nevada&quot;          &quot;Hampshire, New&quot;  &quot;Jersey, New&quot;    
## [31] &quot;Mexico, New&quot;     &quot;York, New&quot;       &quot;Carolina, North&quot;
## [34] &quot;Dakota, North&quot;   &quot;Ohio&quot;            &quot;Oklahoma&quot;       
## [37] &quot;Oregon&quot;          &quot;Pennsylvania&quot;    &quot;Island, Rhode&quot;  
## [40] &quot;Carolina, South&quot; &quot;Dakota, South&quot;   &quot;Tennessee&quot;      
## [43] &quot;Texas&quot;           &quot;Utah&quot;            &quot;Vermont&quot;        
## [46] &quot;Virginia&quot;        &quot;Washington&quot;      &quot;Virginia, West&quot; 
## [49] &quot;Wisconsin&quot;       &quot;Wyoming&quot;
</code></pre></div>
<p><strong>Exercise 11:</strong> For all two-worded state names, abbreviate the first word to be the first letter, followed by a &quot;.&quot; (&quot;North Carolina&quot; becomes &quot;N. Carolina&quot;).</p>
<div class="highlight"><pre><code class="r">sub<span class="p">(</span><span class="s">&quot;^(\\w)\\w+\\s&quot;</span><span class="p">,</span> <span class="s">&quot;\\1. &quot;</span><span class="p">,</span> state.name<span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="text">##  [1] &quot;Alabama&quot;       &quot;Alaska&quot;        &quot;Arizona&quot;       &quot;Arkansas&quot;     
##  [5] &quot;California&quot;    &quot;Colorado&quot;      &quot;Connecticut&quot;   &quot;Delaware&quot;     
##  [9] &quot;Florida&quot;       &quot;Georgia&quot;       &quot;Hawaii&quot;        &quot;Idaho&quot;        
## [13] &quot;Illinois&quot;      &quot;Indiana&quot;       &quot;Iowa&quot;          &quot;Kansas&quot;       
## [17] &quot;Kentucky&quot;      &quot;Louisiana&quot;     &quot;Maine&quot;         &quot;Maryland&quot;     
## [21] &quot;Massachusetts&quot; &quot;Michigan&quot;      &quot;Minnesota&quot;     &quot;Mississippi&quot;  
## [25] &quot;Missouri&quot;      &quot;Montana&quot;       &quot;Nebraska&quot;      &quot;Nevada&quot;       
## [29] &quot;N. Hampshire&quot;  &quot;N. Jersey&quot;     &quot;N. Mexico&quot;     &quot;N. York&quot;      
## [33] &quot;N. Carolina&quot;   &quot;N. Dakota&quot;     &quot;Ohio&quot;          &quot;Oklahoma&quot;     
## [37] &quot;Oregon&quot;        &quot;Pennsylvania&quot;  &quot;R. Island&quot;     &quot;S. Carolina&quot;  
## [41] &quot;S. Dakota&quot;     &quot;Tennessee&quot;     &quot;Texas&quot;         &quot;Utah&quot;         
## [45] &quot;Vermont&quot;       &quot;Virginia&quot;      &quot;Washington&quot;    &quot;W. Virginia&quot;  
## [49] &quot;Wisconsin&quot;     &quot;Wyoming&quot;
</code></pre></div>
  </div>
</div>


  <div id="disqus_thread"></div>
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'rclub'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


      </section>
      <footer>

        <div class="categories">
          
          <h3>Categories</h3>
          
            <h4><a href="/r_club/homework">homework (4)</a></h4>
            <ul>
              
                <li><a href="/r_club/homework/2013/03/29/Data-Types-and-Reshape-homework/">Homework--Data Types and Reshape</a></li>
              
                <li><a href="/r_club/homework/2013/03/04/elaborate-upon-plot/">Elaborate upon a plot</a></li>
              
            </ul>
          
            <h4><a href="/r_club/exercises">exercises (3)</a></h4>
            <ul>
              
                <li><a href="/r_club/exercises/2013/05/02/more-regex/">More Regular Expressions...</a></li>
              
                <li><a href="/r_club/exercises/2013/04/21/Text-Searches-Regular-Expressions/">Strings and Regular Expressions</a></li>
              
            </ul>
          
            <h4><a href="/r_club/solutions">solutions (5)</a></h4>
            <ul>
              
                <li><a href="/r_club/solutions/2013/05/01/Text-Searches-Regular-Expressions-Answers/">Strings and Regular Expressions Answers</a></li>
              
                <li><a href="/r_club/solutions/2013/04/03/Data-Types-and-Reshape-Answers/">Homework--Data Types and Reshape</a></li>
              
            </ul>
          
            <h4><a href="/r_club/resources">resources (7)</a></h4>
            <ul>
              
                <li><a href="/r_club/resources/2013/05/02/regex-resources/">Regex Resources</a></li>
              
                <li><a href="/r_club/resources/2013/03/28/Reshape/">Reshape</a></li>
              
            </ul>
          

          
          
            
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
          
            
            
              
            
          
            
            
          
            
            
              
            
          
            
            
              
            
          
            
            
              
            
          
            
            
              
            
          
            
            
              
            
          
            
            
              
            
          
            
            
              
            
          
            
            
              
            
          
          <h4><a href="/r_club/other">other (15)</a></h4>

          <ul>
            
              
              
            
              
              
            
              
              
                
                
                    <li><a href="/r_club/schedule/2013/05/02/2013-05-02/">2013 05 02</a></li>
                
              
            
              
              
            
              
              
                
                
                    <li><a href="/r_club/schedule/2013/04/25/2013-04-25/">2013 04 25</a></li>
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
                
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
            
              
              
                
                
              
            
              
              
            
              
              
            
              
              
                
                
              
            
              
              
            
              
              
                
                
              
            
              
              
            
              
              
            
              
              
                
                
              
            
              
              
            
              
              
                
                
              
            
              
              
                
                
              
            
              
              
                
                
              
            
              
              
                
                
              
            
              
              
                
                
              
            
              
              
                
                
              
            
              
              
                
                
              
            
              
              
                
                
              
            
          </ul>
        </div>

      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

  </body>
</html>
